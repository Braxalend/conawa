{% extends "index.html" %}
{% block body %}
  {% if session.logged_in %}
    <script type="text/javascript">
        (function gav(){
            $.ajax({
                type: "GET",
                url:"{{url_for('analog_value')}}",
                cache: "false",
                success: 
                function (valuet) {
                    $("#values").html(valuet);
                }   
            })
        setTimeout(gav, 10000);
        })();
    </script>
    <script type="text/javascript">
    $(document).on('click', 'input.on-button',
        function (){
            var value = $(this).val();
                $.ajax({
                    type: "POST",
                    url:"{{url_for('press_button')}}",
                    cache: false,
                    data: {value},
                    success: 
                    function () {
                        console.log(value);
                    },
                    error: {
                    function (error){
                        console.log(error);
                    }
                    },
                    statusCode: {
                        200:
                        function () {
                            console.log("Status press_button - Ok");
                        }
                    }
                })
        }
    );
    </script>
    <span id="values"></span>
<form action="{{url_for('press_button')}}" method="POST">
    <p><input style="width: 200px; height: 100px" type="button" name="button" class="on-button" value="Вкл">
    <input  style="width: 200px; height: 100px" type="button" name="button" class="on-button" value="Откл">
    </p>
</form>
  {% endif %}
{% endblock %}